#!/bin/bash

echo 'Remove Containers'
if [ -n "$(docker ps -f "name=db" -f "status=running" -q )" ] -a [ -n "$(docker ps -f "name=web" -f "status=running" -q )" ] ; then
    echo "the container is running!"
    docker rm -f db
    docker rm -f web
fi

echo "Building.."
docker compose build
	
echo "Testing.."
dotnet restore /gitrepo/src/Server/Server.csproj

echo 'Docker container down'
docker compose down

echo 'Docker container up'
docker compose up -d

exit
