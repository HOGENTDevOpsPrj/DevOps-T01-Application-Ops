#!/bin/bash

#cd /gitrepo 

if [ -n "$(docker ps -f "name=db" -f "status=running" -q )" ] ; then docker rm -f db
fi
sleep 15

if [ -n "$(docker ps -f "name=web" -f "status=running" -q )" ] ; then docker rm -f web
fi
sleep 15

echo "Building.."
#docker compose --file /gitrepo/docker-compose.yml
docker-compose -f /tmp/myproject/docker-compose.yml build
	
echo "Testing.."
#dotnet restore /gitrepo/src/Server/Server.csproj

echo 'Docker container down'
#docker compose down
docker-compose -f /tmp/myproject/docker-compose.yml down

echo 'Docker container up'
#docker compose up -d
docker-compose -f /tmp/myproject/docker-compose.yml up -d

chmod +x test.sh

#cd -

exit
